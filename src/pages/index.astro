---
import "../styles/global.css";

const seo = {
  title: "Greenlight Approvals | NetSuite-Native Budget + Compliance Workflows",
  description:
    "NetSuite-native application for CFOs who need multi-step approvals, budget enforcement, one-click audit packs, and unlimited approvers in a single tray UI.",
  keywords: [
    "NetSuite approvals",
    "Greenlight Approvals",
    "budget enforcement",
    "SOX compliance",
    "NetSuite application",
  ],
  image: "/images/greenlogo.png",
};

const featureCards = [
  {
    title: "Multi-dimensional routing",
    body: "Subsidiary, department, class, location, custom segments, and amount bands combine to mirror any policy.",
    image: "/images/timeline.png",
  },
  {
    title: "Budget intelligence",
    body: "Live NetSuite budgets warn or block when a transaction would put departments, vendors, or GLs over plan.",
    image: "/images/budget.png",
  },
  {
    title: "Audit-grade logging",
    body: "Every click is timestamped with exception flags, reason codes, and denormalized data for one-click exports.",
    image: "/images/Audit.png",
  },
  {
    title: "Modern approval tray",
    body: "Purple slide-out tray, keyboard shortcuts, and inline context keep controllers in NetSuite—not email.",
    image: "/images/ModernTray.png",
  },
];

const featureVideos = [
  {
    title: "Approval Tray",
    videoId: "kR00L4PH3Gk",
    description: "See how Greenlight transforms NetSuite approvals. One slide-out tray: decision context, budget intelligence, approval timeline, one-click approve or reject. Native to NetSuite.",
  },
  {
    title: "Approval rules in 60 seconds",
    videoId: "1DAWQbAhZZA",
    description: "Watch how fast you can build a fully configured approval rule in NetSuite—no scripting, no workflows. Set criteria, assign approvers, add context, enforce SoD. Configuration, not code.",
  },
  {
    title: "Audit Prep in Minutes",
    videoId: "38lEUDLqvBU",
    description: "See how Greenlight turns audit prep from a weeks-long scramble into a few clicks. Pick your date range and reports, export, and hand ready packs to auditors. In minutes.",
  },
];

const differentiators = [
  {
    title: "Approvals everyone understands",
    detail: "NetSuite tray UI with context, guardrails, and zero-code routing keeps admins and approvers aligned.",
  },
  {
    title: "Budget intelligence",
    detail: "Live budget, actual, and projected spend appears inside every approval so finance sees risk instantly.",
  },
  {
    title: "Compliance-first controls",
    detail: "Exception detection, immutable logs, and privacy-minded hosting keep auditors and legal teams happy.",
  },
  {
    title: "Audit reports in seconds",
    detail: "One-click report packs and NetSuite saved searches export the entire trail without spreadsheet work.",
  },
];

const roadmap = [
  {
    phase: "Now",
    title: "Phase 5 Reporting &amp; Analytics wrap-up",
    detail: "Saved search catalog notes, KPI widgets, and exception dashboards for finance leaders.",
  },
  {
    phase: "Next",
    title: "Budget Enforcement GA",
    detail: "Department + vendor budget controls with CFO escalations and tray visualizations.",
  },
  {
    phase: "Q1 2026",
    title: "Compliance Packs &amp; Partner launch",
    detail: "Modular audit packages, partner enablement, and Slack/Teams notifications.",
  },
];

const pricing = [
  {
    tier: "Core",
    price: "$499/mo",
    description: "Linear approvals for smaller finance teams that need to get out of email chains.",
    bullets: [
      "Unlimited approvers",
      "Single-step manager→director→VP workflows",
      "4-dimension matching (amount, department, class, location)",
      "Outbound assignment emails",
      "Immutable audit log with standard support",
    ],
  },
  {
    tier: "Professional",
    price: "$1,199/mo",
    description: "Budget Intelligence + Audit Package for mid-market teams ready for compliance.",
    bullets: [
      "Budget intelligence (MTD/YTD) with line-level segment matching and alerts",
      "Multi-step routing across core dimensions (amount, dept/class/location, project/vendor/customer)",
      "Email approvals with exception detection; SoD warn/enforce (self/duplicate) with basic notifications",
      "One-click audit package exports (standard catalog) and immutable audit logs",
      "Supports 3 subsidiaries with standard support",
    ],
  },
  {
    tier: "Enterprise",
    price: "$2,999/mo",
    description: "Governance & Unlimited — global control tower with executive dashboards and dedicated CSM.",
    bullets: [
      "Unlimited subsidiaries/entities and cross-entity/intercompany orchestration",
      "Unlimited custom audit reports, dashboards, and export catalogs; executive reporting",
      "Advanced governance: SoD Block & Notify with SoD group emails, delegation/edge handling",
      "AI assistant roadmap; future GRC modules (incident/attestation/control testing) included when available",
      "Dedicated CSM/white-glove implementation; priority SLA",
    ],
  },
];

const futureFocus = [
  {
    title: "AI Approval Assistant",
    detail: "In active development: summarizes approvals, suggests routing, and flags policy exceptions before submission.",
  },
  {
    title: "Compliance packs",
    detail: "Pre-built reporting bundles for SOX, ISO, and healthcare certifications ship as add-ons.",
  },
  {
    title: "Planning connectors",
    detail: "Connect NetSuite approvals to FP&A tools so forecasts update the second a transaction is approved.",
  },
];

const canonical = Astro.site ? new URL("/", Astro.site).href : "https://greenlightapprovals.io/";
const imageUrl = canonical.replace(/\/$/, "") + (seo.image.startsWith("/") ? seo.image : "/" + seo.image);

const meetingUrl = "https://meetings-eu1.hubspot.com/patrick-olson?uuid=bfd45059-ae2d-4014-b832-419301f042e9";

const structuredData = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  name: "Greenlight Approvals",
  applicationCategory: "BusinessApplication",
  operatingSystem: "Web",
  description: seo.description,
  offers: {
    "@type": "Offer",
    priceCurrency: "USD",
    price: "499",
    category: "Subscription",
  },
  url: canonical,
  image: imageUrl,
  publisher: {
    "@type": "Organization",
    name: "Greenlight Software LLC",
    url: canonical,
  },
};

// Prevent </script> in any string value from closing the script tag in HTML (fixes Google Search Console parsing error)
const safeJsonLd = JSON.stringify(structuredData).replace(/<\/script/gi, "<\\/script");
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GXNCVNF4MR"></script>
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-GXNCVNF4MR');
    </script>
    <title>{seo.title}</title>
    <meta name="description" content={seo.description} />
    <meta name="keywords" content={seo.keywords.join(", ")} />
    <link rel="canonical" href={canonical} />
    <meta property="og:title" content={seo.title} />
    <meta property="og:description" content={seo.description} />
    <meta property="og:image" content={seo.image} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonical} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={seo.title} />
    <meta name="twitter:description" content={seo.description} />
    <meta name="twitter:image" content={seo.image} />
    <link rel="icon" href="/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&amp;family=Inter:wght@400;500;600&amp;display=swap"
      rel="stylesheet"
    />
    <script type="application/ld+json" set:html={safeJsonLd}></script>
  </head>
  <body>
    <main>
      <header class="hero" id="top">
        <nav class="nav">
          <div class="brand">
            <svg class="logo-mark" viewBox="0 0 120 120" role="img" aria-label="Greenlight Approvals logo">
              <defs>
                <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#6C63FF" />
                  <stop offset="100%" stop-color="#0FB59B" />
                </linearGradient>
              </defs>
              <circle cx="60" cy="60" r="54" fill="url(#logoGradient)" />
              <path
                d="M44 61.5L58.2 75.7 82 48.5"
                fill="none"
                stroke="#FFFFFF"
                stroke-width="12"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span>Greenlight Approvals</span>
          </div>
          <div class="nav-links">
            <a href="#features">Product</a>
            <a href="#pricing">Pricing</a>
            <a href="/blog">Blog</a>
            <a href="#contact">Contact</a>
          </div>
          <a class="cta ghost" href="#contact">Book a Demo</a>
        </nav>
        <div class="hero-grid">
          <div class="hero-copy">
            <p class="eyebrow">NetSuite-Native • Compliance-first approvals</p>
            <h1>Budget-aware approvals with an audit trail CFOs trust.</h1>
            <p class="lede">
              Replace spreadsheets, email daisy chains, and brittle scripts with a native NetSuite tray,
              unlimited approvers, and one-click audit packs. Designed from the documentation up.
            </p>
            <div class="cta-row">
              <a class="cta" href="#contact">Request Access</a>
            </div>
            <div class="pill-trail">
              <span class="pill">SOX-ready</span>
              <span class="pill">Audit-ready in seconds</span>
              <span class="pill">Budget intelligence</span>
            </div>
            <div class="founding-banner">
              Founding Customer pricing — limited-time offer that locks in for 2 years.
            </div>
          </div>
          <div class="hero-visual">
            <div class="hero-card">
              <p class="eyebrow">Live inside NetSuite</p>
              <strong>PO-9841 · $48k Marketing</strong>
              <p>+$3k over departmental budget → auto-route to CFO.</p>
              <ul>
                <li>Budget intelligence</li>
                <li>Escalation timer</li>
                <li>Click-to-approve email link</li>
              </ul>
            </div>
          </div>
        </div>
      </header>

      <section id="features" class="section">
        <div class="section-head">
          <p class="eyebrow">How it works</p>
          <h2>
            Every control lives in one <span class="nowrap">NetSuite-native</span> workflow.
          </h2>
          <p>
            These are the mechanics: how routing decisions are made, how budgets are enforced, how logs are captured,
            and how approvers move through the tray without leaving NetSuite.
          </p>
        </div>
        <div class="card-grid">
          {featureCards.map((card) => (
            <button
              class="card feature-card"
              type="button"
              data-image={card.image}
              data-title={card.title}
              data-body={card.body}
            >
              <div>
                <h3>{card.title}</h3>
                <p>{card.body}</p>
              </div>
              <span>View example →</span>
            </button>
          ))}
        </div>
      </section>

      <section id="see-it-in-action" class="section">
        <div class="section-head">
          <p class="eyebrow">See it in action</p>
          <h2>Watch the product in motion.</h2>
          <p>
            Short walkthroughs of the approval tray, budget intelligence, and audit workflows—no login required.
          </p>
        </div>
        <div class="video-grid">
          {featureVideos.map((video) => (
            <article class="video-card" data-video-id={video.videoId} data-video-title={video.title}>
              <div class="video-card__header">
                <h3>{video.title}</h3>
                <p class="video-card__description">{video.description}</p>
              </div>
              <div class="video-wrapper" data-expand-video aria-label={`Expand ${video.title} to theater mode`}>
                <span class="video-wrapper__expand-hint">Click to expand</span>
                <iframe
                  src={`https://www.youtube.com/embed/${video.videoId}`}
                  title={`${video.title} – YouTube`}
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  referrerpolicy="strict-origin-when-cross-origin"
                  allowfullscreen
                />
              </div>
            </article>
          ))}
        </div>
      </section>

      <section class="section alt" aria-label="differentiators">
        <div class="section-head">
          <p class="eyebrow">Why it matters</p>
          <h2>Native, compliant, and priced for unlimited approvers.</h2>
          <p>
            Outcomes and differentiation: faster close, cleaner audits, richer visibility, and pricing built for
            whole finance teams instead of per-seat add-ons.
          </p>
        </div>
        <div class="card-grid four">
          {differentiators.map((item) => (
            <article class="card outline">
              <h3>{item.title}</h3>
              <p>{item.detail}</p>
            </article>
          ))}
        </div>
      </section>

      <div id="feature-overlay" class="feature-overlay" aria-hidden="true">
        <div class="feature-overlay__backdrop" data-close-overlay></div>
        <div class="feature-overlay__content" role="dialog" aria-modal="true" aria-label="Feature preview">
          <button type="button" class="feature-overlay__close" aria-label="Close preview" data-close-overlay>
            ×
          </button>
          <img src="" alt="" loading="lazy" />
          <p class="feature-overlay__caption"></p>
        </div>
      </div>

      <div id="video-theater" class="video-theater" aria-hidden="true">
        <div class="video-theater__backdrop" data-close-video-theater></div>
        <div class="video-theater__content" role="dialog" aria-modal="true" aria-label="Video theater">
          <button type="button" class="video-theater__close" aria-label="Close video" data-close-video-theater>
            ×
          </button>
          <h3 class="video-theater__title" id="video-theater-title"></h3>
          <div class="video-theater__wrapper">
            <iframe
              id="video-theater-iframe"
              src=""
              title="YouTube video"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
            />
          </div>
        </div>
      </div>

      <section id="pricing" class="section">
        <div class="section-head">
          <p class="eyebrow">Pricing</p>
          <h2>Simple tiers. Unlimited approvers. Compliance add-ons ready.</h2>
        </div>
        <div class="founding-card compact">
          Founding Partner rates available for early adopters and implementation partners. Lock in these rates for 2 years.
        </div>
        <div class="pricing-grid">
          {pricing.map((tier) => (
            <article class="pricing-card">
              <div>
                <p class="eyebrow">{tier.tier}</p>
                <h3>{tier.price}</h3>
                <p>{tier.description}</p>
              </div>
              <ul>
                {tier.bullets.map((bullet) => (
                  <li>{bullet}</li>
                ))}
              </ul>
            </article>
          ))}
        </div>
      </section>

      <section id="contact" class="section contact">
        <div class="section-head">
          <p class="eyebrow">Talk to us</p>
          <h2>Drop your info and we’ll set up a tailored Greenlight Approvals walkthrough.</h2>
        </div>
        <div class="contact-highlights">
          <span>SuiteScript + SuiteQL stack (no external services)</span>
          <span>Unlimited approvers across subsidiaries</span>
          <span>Budget enforcement + audit packs included</span>
        </div>
        <p class="contact-scheduler">
          Prefer to pick a time? <a href={meetingUrl} target="_blank" rel="noopener noreferrer" class="contact-scheduler__link">Schedule a call</a>
        </p>
        <div class="form-shell contact-form">
          <script src="https://js-eu1.hsforms.net/forms/embed/147146964.js" defer></script>
          <div
            class="hs-form-frame"
            data-region="eu1"
            data-form-id="71fd5e3a-08fd-44ab-afcc-b891cf3bb2d5"
            data-portal-id="147146964"
          ></div>
        </div>
        <p class="contact-note">Need references or a sample rollout plan? We’ll share both on your intro call.</p>
      </section>
    </main>

    <footer class="footer">
      <div>
        <svg class="logo-mark" viewBox="0 0 120 120" role="img" aria-label="Greenlight Approvals logo">
          <defs>
            <linearGradient id="logoGradientFooter" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#6C63FF" />
              <stop offset="100%" stop-color="#0FB59B" />
            </linearGradient>
          </defs>
          <circle cx="60" cy="60" r="54" fill="url(#logoGradientFooter)" />
          <path
            d="M44 61.5L58.2 75.7 82 48.5"
            fill="none"
            stroke="#FFFFFF"
            stroke-width="12"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        <p>© {new Date().getFullYear()} Greenlight Software LLC • Wyoming</p>
      </div>
      <div class="footer-links">
        <a href="/privacy">Privacy</a>
        <a href="/terms">Terms</a>
        <a href="#top">Back to top</a>
      </div>
    </footer>

    <script is:inline>
      const overlay = document.getElementById('feature-overlay');
      if (overlay) {
        const img = overlay.querySelector('img');
        const caption = overlay.querySelector('.feature-overlay__caption');
        const closeTargets = overlay.querySelectorAll('[data-close-overlay]');
        const featureButtons = document.querySelectorAll('.feature-card');

        const closeOverlay = () => {
          overlay.classList.remove('is-open');
          overlay.setAttribute('aria-hidden', 'true');
          if (img) {
            img.src = '';
            img.alt = '';
          }
          if (caption) {
            caption.textContent = '';
          }
        };

        featureButtons.forEach((button) => {
          button.addEventListener('click', () => {
            const image = button.getAttribute('data-image');
            const title = button.getAttribute('data-title');
            const body = button.getAttribute('data-body');
            if (img && image) {
              img.src = image;
              img.alt = `${title} screenshot`;
            }
            if (caption) {
              caption.textContent = `${title} — ${body}`;
            }
            overlay.classList.add('is-open');
            overlay.setAttribute('aria-hidden', 'false');
          });
        });

        closeTargets.forEach((target) => target.addEventListener('click', closeOverlay));
        document.addEventListener('keydown', (event) => {
          if (event.key === 'Escape' && overlay.classList.contains('is-open')) {
            closeOverlay();
          }
        });
      }

      const videoTheater = document.getElementById('video-theater');
      if (videoTheater) {
        const iframe = document.getElementById('video-theater-iframe');
        const titleEl = document.getElementById('video-theater-title');
        const closeTargets = videoTheater.querySelectorAll('[data-close-video-theater]');

        const closeVideoTheater = () => {
          videoTheater.classList.remove('is-open');
          videoTheater.setAttribute('aria-hidden', 'true');
          if (iframe) iframe.src = '';
          document.body.style.overflow = '';
        };

        document.querySelectorAll('.video-wrapper[data-expand-video]').forEach((wrapper) => {
          wrapper.addEventListener('click', (e) => {
            const card = wrapper.closest('.video-card');
            if (!card) return;
            const videoId = card.getAttribute('data-video-id');
            const title = card.getAttribute('data-video-title');
            if (!videoId || !iframe) return;
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
            if (titleEl) titleEl.textContent = title || '';
            videoTheater.classList.add('is-open');
            videoTheater.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
          });
        });

        closeTargets.forEach((target) => target.addEventListener('click', closeVideoTheater));
        videoTheater.querySelector('.video-theater__backdrop')?.addEventListener('click', closeVideoTheater);
        document.addEventListener('keydown', (event) => {
          if (event.key === 'Escape' && videoTheater.classList.contains('is-open')) {
            closeVideoTheater();
          }
        });
      }
    </script>
  </body>
</html>
